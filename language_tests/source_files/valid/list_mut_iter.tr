func main() {
    var list = List[int32]()
    list.append(1)
    list.append(2)
    list.append(3)

    // Iterate mutably and double each element
    var iter = (&mut list).makeIterator()
    loop {
        match iter.next() {
            case .some(elem) => {
                *elem *= 2
            }
            case .none => {
                break
            }
        }
    }

    // Verify changes
    if *list.at(0) != 2 {
        std.print("FAIL: Expected 2")
        std.print("\n")
        std.process.exit(1)
    }
    if *list.at(1) != 4 {
        std.print("FAIL: Expected 4")
        std.print("\n")
        std.process.exit(1)
    }
    if *list.at(2) != 6 {
        std.print("FAIL: Expected 6")
        std.print("\n")
        std.process.exit(1)
    }

    std.print("PASS\n")
}
