// Test: Generics Pipe Mixed
// Checks generic function calls mixed with the pipe operator |>.

func main() {
    let a: uint32 = 10
    let b = use(value: a)
    
    assert(b == 10, "Base value mismatch")

    let x = "Hello, World.\n"
    let y = use(value: x)
    
    let y_str = "test"
    let out = increment(y_str)
    
    std.print("PASS: Generic pipe chains working\n")
}

func use[V](value: V) -> V { expose(value) }
func expose[T](_ value: T) -> T { value }

func increment[T](_ value: T) -> &T { value |> use(value:_) |> make }
