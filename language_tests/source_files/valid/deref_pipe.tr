// Test: Dereference Pipe
// Checks dereferencing pointers in a pipe chain.

func main() {
    let x = "One\n"

    let y = make("Two\n")

    let z = increment("Three\n")

    assert(x == "One\n", "x value check")
    
    std.print("PASS: Deref pipe functional\n")
}

func use[V](value: V) -> V { expose(value) }
func expose[T](_ value: T) -> T { value }

func increment[T](_ value: T) -> &T {
    value |> use(value:_) |> make
}
