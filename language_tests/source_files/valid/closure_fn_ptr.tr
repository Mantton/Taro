// Test non-capturing closure to function pointer coercion

func apply_fn_ptr(_ f: (int32) -> int32, _ x: int32) -> int32 {
    return f(x)
}

func main() {
    // Non-capturing closure can coerce to fn pointer
    let double: (int32) -> int32 = |x: int32| -> int32 { x * 2 }

    let result = apply_fn_ptr(double, 5)
    std.assert(result == 10, "double(5) should be 10")

    // Inline non-capturing closure coercion
    let result2 = apply_fn_ptr(|x: int32| -> int32 { x + 100 }, 7)
    std.assert(result2 == 107, "closure(7) should be 107")

    // No-arg closure to fn pointer
    let get_42: () -> int32 = || -> int32 { 42 }
    std.assert(get_42() == 42, "get_42() should be 42")

    std.print("closure_fn_ptr: PASSED")
}
