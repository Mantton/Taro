import std.collections.Array

// Test: Const-generic default parameters.

struct Buf[const N: usize = 8] {
    data: [uint8; N]
}

func main() {
    // Buf with default N=8
    let b1: Buf = Buf { data: [1, 2, 3, 4, 5, 6, 7, 8] }
    assert(*b1.data.at(0) == 1, "Buf default N=8 should work")
    assert(*b1.data.at(7) == 8, "Buf should have 8 elements by default")

    // Buf with explicit N=4
    let b2: Buf[4] = Buf { data: [10, 20, 30, 40] }
    assert(*b2.data.at(0) == 10, "Buf explicit N=4 should work")
    assert(*b2.data.at(3) == 40, "Buf explicit size should be respected")

    std.print("PASS: const-generic defaults\n")
}
