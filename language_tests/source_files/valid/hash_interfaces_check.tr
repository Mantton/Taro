// CHECK_ONLY
// Hash interfaces phase 2A-1: typecheck byte-ingest hasher contract.

import std.hash.{Hasher, Hashable}
import std.mem.Span

struct DummyHasher {}

impl Hasher for DummyHasher {
    public func write(&mut self, _ bytes: Span[uint8]) {}
    public func finish(&self) -> uint64 { 0 }
}

func useHasher[H: Hasher](_ hasher: &mut H) -> uint64 {
    let bytes: [uint8; 4] = [1, 2, 3, 4]
    hasher.write(bytes.as_span())
    hasher.combine(42 as int32)
    return hasher.finish()
}

func main() {
    var hasher = DummyHasher {}
    let _ = useHasher(&mut hasher)
}
