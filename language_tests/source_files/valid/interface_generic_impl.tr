// Test: Interface Generic Implementation
// Checks implementing multiple generic specializations of the same interface.

func main() {
    std.print("=== Generic Interface Test ===\n")

    let user = User { id: 42, name: "Alice" }

    // Test with Container[string]
    printStringContainer(user)

    // Test with Container[usize]
    printIntContainer(user)
    
    std.print("PASS: Generic interface implementation\n")
}

interface Container[T] {
    func retrieve(&self) -> T
}

struct User: Copy {
    id: usize
    name: string
}


impl Container[string] for User {
    func retrieve(&self) -> string {
        self.name
    }
}

impl Container[usize] for User {
    func retrieve(&self) -> usize {
        self.id
    }
}

func printStringContainer(_ value: any Container[string]) {
    let str = value.retrieve()
    assert(str == "Alice", "String container retrieve failed")
}

func printIntContainer(_ value: any Container[usize]) {
    let id = value.retrieve()
    match id {
        case 42 => {
             assert(true, "Found correct ID")
        }
        case _ => {
             assert(false, "Found wrong ID")
        }
    }
}
