// Test: Generic Operator Overloading
// Checks declaring operators in interfaces and implementing them using generics.

func main() {
    let a = Point { x: 2, y: 2 }
    let b = Point { x: 2, y: 2 }
    let c = add_gen(a: a, b: b)
    let d = c.x + c.y
    
    assert(d == 8, "Generic operator add result")
    
    std.print("PASS: Generic operator overload\n")
}

public interface Addable {
    operator +(self, rhs: Self) -> Self
}

public func add_gen[T: Addable](a: T, b: T) -> T {
    a + b
}

struct Point {
    x: int32
    y: int32
}

extend Point: Addable {
    operator +(self, rhs: Self) -> Self {
        Self { x: self.x + rhs.x, y: self.y + rhs.y }
    }
}
