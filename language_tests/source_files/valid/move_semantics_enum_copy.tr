// Test: Move Semantics - Enum Copy
// Checks that enums with Copy variants work correctly.

enum Status: Copy {
    case Active
    case Inactive
}

enum MyResult: Copy {
    case Ok(int32)
    case Error(int32)
}

func main() {
    test_simple_enum_copy()
    test_enum_with_data_copy()
    std.print("PASS: Enum Copy works correctly\n")
}

func test_simple_enum_copy() {
    let s1 = Status.Active
    let s2 = s1  // copy
    let s3 = s1  // copy again
    
    // All three should be usable
    match s1 {
        case .Active => assert(true, "s1 is Active")
        case .Inactive => assert(false, "s1 should be Active")
    }
    match s2 {
        case .Active => assert(true, "s2 is Active")
        case .Inactive => assert(false, "s2 should be Active")
    }
    match s3 {
        case .Active => assert(true, "s3 is Active")
        case .Inactive => assert(false, "s3 should be Active")
    }
}

func test_enum_with_data_copy() {
    let r1 = MyResult.Ok(42)
    let r2 = r1  // copy
    let r3 = r1  // copy again
    
    match r1 {
        case .Ok(v) => assert(v == 42, "r1 Ok value")
        case .Error(_) => assert(false, "r1 should be Ok")
    }
    match r2 {
        case .Ok(v) => assert(v == 42, "r2 Ok value")
        case .Error(_) => assert(false, "r2 should be Ok")
    }
    match r3 {
        case .Ok(v) => assert(v == 42, "r3 Ok value")
        case .Error(_) => assert(false, "r3 should be Ok")
    }
}
