// Test: Collections as_span
// Verifies Array/List immutable and mutable span views.

func main() {
    var array: [int32; 4] = [1, 2, 3, 4]
    let arrayView = array.as_span()
    assert(arrayView.len() == (4 as usize), "Array.as_span length mismatch")
    assert(*arrayView.at(2) == 3, "Array.as_span read mismatch")

    var arrayMut = array.as_span()
    *arrayMut.at(1) = 20
    assert(*array.at(1) == 20, "Array mutable as_span write mismatch")

    var arrayTail = arrayMut.slice(1, 2)
    *arrayTail.at(0) = 21
    assert(*array.at(1) == 21, "Array mutable as_span slice mismatch")

    var list: List[int32] = List()
    list.append(10)
    list.append(11)
    list.append(12)

    let listView = list.as_span()
    assert(listView.len() == (3 as usize), "List.as_span length mismatch")
    assert(*listView.at(0) == 10, "List.as_span read mismatch")

    var listMut = list.as_span()
    *listMut.at(2) = 120
    assert(*list.at(2) == 120, "List mutable as_span write mismatch")

    var listTail = listMut.slice(1, 2)
    *listTail.at(0) = 111
    assert(*list.at(1) == 111, "List mutable as_span slice mismatch")

    std.print("PASS: Collections as_span usage\n")
}
