// CHECK_ONLY
// Ensures bounded operators type-check for user-defined Ord/PartialEq types.
import std.cmp.{Ord, PartialOrd, Ordering}

struct Score {
    value: int32
}

impl PartialEq for Score {
    func eq(&self, _ other: &Score) -> bool {
        self.value == other.value
    }
}

impl PartialOrd for Score {
    func partialCmp(&self, _ other: &Score) -> Optional[Ordering] {
        .some(self.cmp(other))
    }
}

impl Ord for Score {
    func cmp(&self, _ other: &Score) -> Ordering {
        if self.value < other.value {
            .less
        } else if self.value == other.value {
            .equal
        } else {
            .greater
        }
    }
}

func geq[T: Ord](_ a: T, _ b: T) -> bool {
    a >= b
}

func eqv[T: PartialEq](_ a: T, _ b: T) -> bool {
    a == b
}

func main() {
    let a = Score { value: 10 }
    let b = Score { value: 7 }

    // Type-check coverage: generic operators over custom constrained type.
    let _ = geq(a, b)
    let _ = eqv(a, b)
}
