// Test: Optional Match Verbose
// Checks matching on Optional types using fully qualified names.

func main() {
    let a = Optional.some("Hello, World.\n")

    match a {
        case Optional.none => {
            assert(false, "Should not be none")
        }
        case Optional.some(str) => {
            assert(true, "Matched some")
        }
    }

    let data = make(MyData {
        id: 10,
        name: "Jackson",
        isRegistered: true,
        flag: 'A',
    })

    let optional_data = Optional.some(data)

    match optional_data {
        case Optional.some(x) => {
            assert(x.name == "Jackson", "Struct field access in match")
            assert(x.isRegistered, "Boolean field check")
        }
        case Optional.none => {
            assert(false, "Should have data")
        }
    }

    std.print("PASS: Optional verbose match working\n")
}


enum Optional[T] {
    case none
    case some(T)
}


struct MyData {
    id: usize
    name: string
    isRegistered: bool
    flag: rune
}
