// Test: Interfaces and Associated Types
// Checks interface definitions, conformance, and associated types.

func main() {
    let d = MyData {
        id: 123,
        name: "Test",
        isRegistered: true,
        flag: 'F',
    }
    
    assert(d.identifier() == 123, "Interface method implementation check")
    
    let c = Container {
        data: std.unsafe.GcPtr.null(), // Placeholder buffer
        len: 10,
        cap: 20,
    }
    
    assert(c.len() == 10, "Container implementation check")
    
    std.print("PASS: Interface conformance working\n")
}

interface Entity {
    func identifier(&self) -> usize
}

interface Aircraft: Entity, Usable[bool] {}
interface Usable[T] {}
interface Collection {
    type Item
    func len(&self) -> usize
}

struct MyData {
    id: usize
    name: string
    isRegistered: bool
    flag: rune
}

extend MyData: Entity {
    func identifier(&self) -> usize {
        self.id
    }
}


struct Container {
    data: std.unsafe.GcPtr
    len: usize
    cap: usize
}

extend Container: Collection {
    type Item = Folder.Section.Side
    func len(&self) -> usize {
        self.len
    }
}

type OptionalString = std.prelude.Optional[string]


struct Folder {}
extend Folder {
    type Section = Page

    func use(&self, _ page: Self.Section) {}
}

struct Page {}
extend Page {
    type Side = rune
}
